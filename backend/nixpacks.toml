# ============================================
# üê≥ NIXPACKS.TOML - BUILD CONFIGURATION
# ============================================

[phases.setup]
nixPkgs = ["nodejs-20_x", "openssl"]

[phases.install]
cmds = [
  "npm ci --include=dev"
]

[phases.build]
cmds = [
  "cp -r prisma ./node_modules/.prisma/ || true",
  "npx prisma generate",
  "npm run build"
]

[start]
cmd = "npx prisma generate && node dist/index.js"
