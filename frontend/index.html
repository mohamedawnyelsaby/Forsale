<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="description" content="Forsale - The world's smartest marketplace powered by AI and Pi Network">
    <meta name="keywords" content="marketplace, buy, sell, ai, pi network, cryptocurrency, e-commerce">
    <meta name="theme-color" content="#0066FF">
    
    <title>Forsale - Smart Global Marketplace</title>
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
    
    <!-- Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    
    <!-- Styles -->
    <link rel="stylesheet" href="style-new.css">
    
    <!-- Pi Network SDK -->
    <script src="https://sdk.minepi.com/pi-sdk.js"></script>
    <script>
      if (typeof Pi !== 'undefined') {
        Pi.init({ version: "2.0", sandbox: true });
        console.log('âœ… Pi SDK initialized');
      }
    </script>
</head>
<body>

<!-- ========================================
     AUTHENTICATION SCREEN
     ======================================== -->
<div id="auth-container" style="display: flex;">
    <div style="text-align: center; max-width: 400px; width: 100%; padding: 20px;">
        <!-- Logo -->
        <div style="margin-bottom: 40px;">
            <div class="logo" style="font-size: 48px; justify-content: center; margin-bottom: 10px;">
                <div class="logo-icon">ğŸ›ï¸</div>
                Forsale
            </div>
            <p style="color: var(--medium-gray); font-size: var(--text-lg);">
                The World's Smartest Marketplace
            </p>
            <p style="color: var(--electric-blue); font-size: var(--text-sm); margin-top: 5px;">
                Powered by AI & Pi Network
            </p>
        </div>
        
        <!-- Login Card -->
        <div class="card" style="padding: var(--space-8); text-align: center;">
            <h2 style="margin-bottom: var(--space-6); font-size: var(--text-3xl);">Welcome Back</h2>
            
            <!-- Email Input -->
            <div style="position: relative; margin-bottom: var(--space-4);">
                <input 
                    type="email" 
                    id="login-email" 
                    placeholder="Email address"
                    style="width: 100%; padding: 16px 48px 16px 16px; border-radius: var(--radius-full); border: 2px solid rgba(255,255,255,0.1); background: rgba(255,255,255,0.05); color: white; font-size: var(--text-base);">
                <i class="fa-solid fa-envelope" style="position: absolute; right: 18px; top: 50%; transform: translateY(-50%); color: var(--electric-blue);"></i>
            </div>
            
            <!-- Password Input -->
            <div style="position: relative; margin-bottom: var(--space-6);">
                <input 
                    type="password" 
                    id="login-password" 
                    placeholder="Password"
                    style="width: 100%; padding: 16px 48px 16px 16px; border-radius: var(--radius-full); border: 2px solid rgba(255,255,255,0.1); background: rgba(255,255,255,0.05); color: white; font-size: var(--text-base);">
                <i class="fa-solid fa-lock" style="position: absolute; right: 18px; top: 50%; transform: translateY(-50%); color: var(--electric-blue);"></i>
            </div>
            
            <!-- Login Button -->
            <button class="btn btn-primary btn-lg btn-full" id="login-btn">
                <span>Sign In</span>
                <i class="fa-solid fa-arrow-right"></i>
            </button>
            
            <!-- Divider -->
            <div style="margin: var(--space-6) 0; display: flex; align-items: center; gap: var(--space-4);">
                <div style="flex: 1; height: 1px; background: rgba(255,255,255,0.1);"></div>
                <span style="color: var(--medium-gray); font-size: var(--text-sm);">OR</span>
                <div style="flex: 1; height: 1px; background: rgba(255,255,255,0.1);"></div>
            </div>
            
            <!-- Biometric Login -->
            <div 
                id="fingerprint-login-btn"
                style="cursor: pointer; margin-bottom: var(--space-4); padding: var(--space-4); border-radius: var(--radius-lg); background: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.1); transition: var(--transition-base);"
                onmouseover="this.style.background='rgba(255,255,255,0.08)'"
                onmouseout="this.style.background='rgba(255,255,255,0.03)'">
                <i class="fa-solid fa-fingerprint" style="font-size: 40px; color: var(--electric-blue); margin-bottom: 8px; animation: pulse 2s infinite;"></i>
                <p style="font-size: var(--text-sm); color: var(--electric-blue); font-weight: 600;">
                    Quick Login with Biometrics
                </p>
            </div>
            
            <!-- Pi Network Login -->
            <button class="btn btn-secondary btn-full" id="pi-login-btn">
                <i class="fa-solid fa-network-wired"></i>
                <span>Continue with Pi Network</span>
            </button>
            
            <!-- Sign Up Link -->
            <p style="margin-top: var(--space-6); color: var(--medium-gray); font-size: var(--text-sm);">
                Don't have an account? 
                <a href="#" onclick="showRegister()" style="color: var(--electric-blue); font-weight: 600;">Sign Up</a>
            </p>
        </div>
        
        <!-- Language Selector -->
        <div style="margin-top: var(--space-6);">
            <select id="language-selector" class="language-select" onchange="changeLanguage(this.value)">
                <option value="en">ğŸ‡¬ğŸ‡§ English</option>
                <option value="ar">ğŸ‡¸ğŸ‡¦ Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</option>
                <option value="es">ğŸ‡ªğŸ‡¸ EspaÃ±ol</option>
                <option value="fr">ğŸ‡«ğŸ‡· FranÃ§ais</option>
                <option value="de">ğŸ‡©ğŸ‡ª Deutsch</option>
                <option value="zh">ğŸ‡¨ğŸ‡³ ä¸­æ–‡</option>
                <option value="hi">ğŸ‡®ğŸ‡³ à¤¹à¤¿à¤¨à¥à¤¦à¥€</option>
                <option value="pt">ğŸ‡§ğŸ‡· PortuguÃªs</option>
                <option value="ru">ğŸ‡·ğŸ‡º Ğ ÑƒÑÑĞºĞ¸Ğ¹</option>
                <option value="ja">ğŸ‡¯ğŸ‡µ æ—¥æœ¬èª</option>
            </select>
        </div>
    </div>
</div>

<!-- ========================================
     MAIN APP
     ======================================== -->
<div id="app-container" class="app-container" style="display: none;">
    
    <!-- ============ HEADER ============ -->
    <header class="header">
        <div class="header-container container">
            <div class="logo">
                <div class="logo-icon">ğŸ›ï¸</div>
                <span>Forsale</span>
            </div>
            
            <div class="header-actions">
                <!-- Language Switcher -->
                <div class="language-switcher" style="position: relative;">
                    <button class="icon-btn" onclick="toggleLanguageMenu()" title="Change Language">
                        <i class="fa-solid fa-globe"></i>
                    </button>
                    <div id="language-menu" class="language-menu" style="display: none;">
                        <div class="language-menu-item" onclick="changeLanguage('en')">ğŸ‡¬ğŸ‡§ English</div>
                        <div class="language-menu-item" onclick="changeLanguage('ar')">ğŸ‡¸ğŸ‡¦ Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</div>
                        <div class="language-menu-item" onclick="changeLanguage('es')">ğŸ‡ªğŸ‡¸ EspaÃ±ol</div>
                        <div class="language-menu-item" onclick="changeLanguage('fr')">ğŸ‡«ğŸ‡· FranÃ§ais</div>
                        <div class="language-menu-item" onclick="changeLanguage('de')">ğŸ‡©ğŸ‡ª Deutsch</div>
                        <div class="language-menu-item" onclick="changeLanguage('zh')">ğŸ‡¨ğŸ‡³ ä¸­æ–‡</div>
                        <div class="language-menu-item" onclick="changeLanguage('hi')">ğŸ‡®ğŸ‡³ à¤¹à¤¿à¤¨à¥à¤¦à¥€</div>
                        <div class="language-menu-item" onclick="changeLanguage('pt')">ğŸ‡§ğŸ‡· PortuguÃªs</div>
                    </div>
                </div>
                
                <button class="icon-btn primary" onclick="openAiUpload()" title="Sell Item">
                    <i class="fa-solid fa-plus"></i>
                </button>
                
                <button class="icon-btn" onclick="openNotifications()" title="Notifications">
                    <i class="fa-solid fa-bell"></i>
                    <span class="notification-badge">3</span>
                </button>
                
                <button class="icon-btn" onclick="openSettings()" title="Settings">
                    <i class="fa-solid fa-gear"></i>
                </button>
            </div>
        </div>
    </header>
    
    <!-- ============ MAIN CONTENT ============ -->
    <main class="container">
        
        <!-- Search Bar -->
        <div class="search-container">
            <div class="search-box">
                <input 
                    type="text" 
                    class="search-input" 
                    placeholder="Search with AI or describe your dream product..."
                    aria-label="Search products"
                    data-i18n="search_placeholder">
                <div class="search-actions">
                    <button class="search-action-btn" title="Voice Search">
                        <i class="fa-solid fa-microphone"></i>
                    </button>
                    <button class="search-action-btn" title="Image Search">
                        <i class="fa-solid fa-camera"></i>
                    </button>
                </div>
                <i class="fa-solid fa-magnifying-glass search-icon"></i>
            </div>
        </div>
        
        <!-- Categories -->
        <section class="categories-container">
            <div class="section-header">
                <div>
                    <h2 class="section-title">
                        <i class="fa-solid fa-grid"></i>
                        <span data-i18n="categories">Categories</span>
                    </h2>
                </div>
            </div>
            <div class="categories-scroll" id="categories-scroll">
                <!-- Categories will be rendered here by JS -->
            </div>
        </section>
        
        <!-- Hot Deals -->
        <section style="margin-top: var(--space-8);">
            <div class="section-header">
                <div>
                    <h2 class="section-title">
                        <i class="fa-solid fa-fire"></i>
                        <span data-i18n="hot_deals">Hot Deals</span>
                    </h2>
                    <p class="section-subtitle" data-i18n="limited_time">Limited time offers</p>
                </div>
                <a href="#" style="color: var(--electric-blue); font-weight: 600; font-size: var(--text-sm);" data-i18n="see_all">
                    See All â†’
                </a>
            </div>
            
            <div class="products-grid" id="products-grid">
                <!-- Products will be rendered here by JS -->
            </div>
        </section>
        
        <!-- AI Recommendations -->
        <section style="margin-top: var(--space-8);">
            <div class="section-header">
                <div>
                    <h2 class="section-title">
                        <i class="fa-solid fa-sparkles"></i>
                        <span data-i18n="ai_picks">AI Picks for You</span>
                    </h2>
                    <p class="section-subtitle" data-i18n="personalized">Personalized recommendations</p>
                </div>
            </div>
            
            <div class="products-grid">
                <!-- AI recommended products -->
            </div>
        </section>
        
    </main>
    
    <!-- ============ BOTTOM NAVIGATION ============ -->
    <nav class="bottom-nav">
        <div class="nav-item active" onclick="this.classList.add('active')">
            <i class="fa-solid fa-house nav-icon"></i>
            <span class="nav-label" data-i18n="home">Home</span>
        </div>
        
        <div class="nav-item" onclick="openLogyAi()">
            <i class="fa-solid fa-robot nav-icon"></i>
            <span class="nav-label" data-i18n="ai_search">AI Search</span>
        </div>
        
        <div class="nav-item-add" onclick="openAiUpload()">
            <i class="fa-solid fa-plus"></i>
        </div>
        
        <div class="nav-item" onclick="openOrders()">
            <i class="fa-solid fa-box nav-icon"></i>
            <span class="nav-label" data-i18n="orders">Orders</span>
        </div>
        
        <div class="nav-item" onclick="openWallet()">
            <i class="fa-solid fa-wallet nav-icon"></i>
            <span class="nav-label" data-i18n="wallet">Wallet</span>
        </div>
    </nav>
    
</div>

<!-- ========================================
     PRODUCT DETAIL MODAL
     ======================================== -->
<div id="product-detail-modal" class="modal">
    <div class="modal-header">
        <div class="modal-title">
            <i class="fa-solid fa-eye"></i>
            <span data-i18n="product_details">Product Details</span>
        </div>
        <button class="icon-btn" onclick="closeProductDetail()">
            <i class="fa-solid fa-xmark"></i>
        </button>
    </div>
    
    <div class="modal-content">
        <img id="detail-img" src="" alt="Product" style="width: 100%; height: 300px; object-fit: cover; border-radius: var(--radius-lg); margin-bottom: var(--space-4);">
        
        <h1 id="detail-title" style="font-size: var(--text-3xl); margin-bottom: var(--space-2);"></h1>
        <div id="detail-price" style="font-size: var(--text-4xl); color: var(--electric-blue); font-weight: 900; margin-bottom: var(--space-6);"></div>
        
        <!-- AI Analysis -->
        <div class="card" style="padding: var(--space-4); margin-bottom: var(--space-4);">
            <h3 style="display: flex; align-items: center; gap: var(--space-2); margin-bottom: var(--space-3); color: var(--purple-accent);">
                <i class="fa-solid fa-robot"></i>
                <span data-i18n="ai_price_intelligence">AI Price Intelligence</span>
            </h3>
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: var(--space-4);">
                <div style="text-align: center; padding: var(--space-4); background: rgba(139, 92, 246, 0.1); border-radius: var(--radius-md); border: 1px solid var(--purple-accent);">
                    <div id="ai-score" style="font-size: var(--text-3xl); font-weight: 900; color: var(--purple-accent);">9.2</div>
                    <div style="font-size: var(--text-xs); color: var(--medium-gray); margin-top: 4px;" data-i18n="deal_score">Deal Score</div>
                </div>
                <div style="text-align: center; padding: var(--space-4); background: rgba(0, 102, 255, 0.1); border-radius: var(--radius-md); border: 1px solid var(--electric-blue);">
                    <div id="ai-market-price" style="font-size: var(--text-3xl); font-weight: 900; color: var(--electric-blue);">0.65 Pi</div>
                    <div style="font-size: var(--text-xs); color: var(--medium-gray); margin-top: 4px;" data-i18n="market_avg">Market Avg</div>
                </div>
            </div>
        </div>
        
        <!-- Description -->
        <div class="card" style="padding: var(--space-4); margin-bottom: var(--space-4);">
            <h3 style="margin-bottom: var(--space-3);">
                <i class="fa-solid fa-file-lines"></i>
                <span data-i18n="description">Description</span>
            </h3>
            <p id="detail-desc" style="line-height: 1.8; color: var(--medium-gray);"></p>
        </div>
        
        <!-- Seller Info -->
        <div class="card" style="padding: var(--space-4); margin-bottom: var(--space-20);">
            <h3 style="margin-bottom: var(--space-3);">
                <i class="fa-solid fa-user"></i>
                <span data-i18n="seller_info">Seller Information</span>
            </h3>
            <div style="display: flex; align-items: center; gap: var(--space-3);">
                <div style="width: 48px; height: 48px; border-radius: var(--radius-full); background: linear-gradient(135deg, var(--electric-blue), var(--purple-accent)); display: flex; align-items: center; justify-content: center; font-size: var(--text-xl);">
                    ğŸ‘¤
                </div>
                <div style="flex: 1;">
                    <div style="font-weight: 600; margin-bottom: 4px;">Ahmed Mohamed</div>
                    <div style="font-size: var(--text-sm); color: var(--success-green);">
                        <i class="fa-solid fa-check-circle"></i> 
                        <span data-i18n="verified_seller">Verified Seller</span>
                    </div>
                </div>
                <div style="text-align: right;">
                    <div style="font-size: var(--text-xl); font-weight: 700;">4.9â­</div>
                    <div style="font-size: var(--text-xs); color: var(--medium-gray);">1,234 <span data-i18n="sales">sales</span></div>
                </div>
            </div>
            <button class="btn btn-secondary btn-full" style="margin-top: var(--space-4);">
                <i class="fa-solid fa-message"></i>
                <span data-i18n="message_seller">Message Seller</span>
            </button>
        </div>
    </div>
    
    <!-- Fixed Buy Button -->
    <div style="position: fixed; bottom: 0; left: 0; right: 0; padding: var(--space-4); background: rgba(10, 22, 40, 0.98); backdrop-filter: blur(20px); border-top: 1px solid rgba(255,255,255,0.1); z-index: 100;">
        <button class="btn btn-success btn-lg btn-full" onclick="openCheckout()">
            <i class="fa-solid fa-shopping-cart"></i>
            <span data-i18n="buy_now">Buy Now</span>
        </button>
    </div>
</div>

<!-- Additional modals remain the same structure but with data-i18n attributes -->

<!-- Language Menu Styles -->
<style>
.language-select {
    padding: 10px 16px;
    background: rgba(255, 255, 255, 0.05);
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: var(--radius-full);
    color: white;
    font-size: var(--text-sm);
    cursor: pointer;
    transition: var(--transition-base);
}

.language-select:hover {
    background: rgba(255, 255, 255, 0.1);
    border-color: var(--electric-blue);
}

.language-menu {
    position: absolute;
    top: 50px;
    right: 0;
    background: rgba(10, 22, 40, 0.98);
    backdrop-filter: blur(20px);
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: var(--radius-lg);
    min-width: 180px;
    box-shadow: var(--shadow-xl);
    z-index: 1000;
    overflow: hidden;
}

.language-menu-item {
    padding: 12px 16px;
    color: white;
    cursor: pointer;
    transition: var(--transition-fast);
    font-size: var(--text-sm);
}

.language-menu-item:hover {
    background: rgba(0, 102, 255, 0.1);
    color: var(--electric-blue);
}

.language-menu-item.active {
    background: var(--electric-blue);
    color: white;
}
</style>

<!-- JavaScript -->
<script src="script-new.js"></script>
<script src="i18n.js"></script>

</body>
</html>
