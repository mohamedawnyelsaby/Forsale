<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Forsale AI - Global Market</title>
    
    <!-- ุฎุทูุท ุนุงูููุฉ (Cairo + Inter) -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;600;800&family=Inter:wght@300;400;600&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link rel="stylesheet" href="style.css">
    
    <!-- Pi Network SDK -->
    <script src="https://sdk.minepi.com/pi-sdk.js"></script>
    <script>
      if (typeof Pi !== 'undefined') {
        Pi.init({ version: "2.0", sandbox: true });
      }
    </script>
</head>
<body>

<!-- ุฒุฑ ุงููุบุฉ ุงูุนุงุฆู (ูุธูุฑ ูู ุดุงุดุฉ ุงูุฏุฎูู) -->
<div class="lang-float-btn" id="lang-float-btn" onclick="toggleLangDropdown()">
    <span id="currentFlag">๐ธ๐ฆ</span> <span id="currentLangCode">AR</span>
</div>
<div class="lang-dropdown" id="langDropdown">
    <!-- ุณูุชู ููุคูุง ุจุงูุฌุงูุงุณูุฑูุจุช -->
</div>

<!-- ========================================== -->
<!-- 1. ุดุงุดุฉ ุชุณุฌูู ุงูุฏุฎูู -->
<!-- ========================================== -->
<div id="auth-container">
    <div class="auth-logo">
        <span style="background:var(--accent);color:black;font-size:14px;padding:2px 8px;border-radius:6px">AI</span> 
        Forsale
    </div>
    <p style="color:var(--text-muted);margin-bottom:30px;text-align:center" data-i18n="auth.subtitle">ููุตุฉ ุงููุณุชูุจู ุงูุฐููุฉ - ูุฏุนููุฉ ุจู Pi Network</p>

    <div class="auth-card">
        <h2 style="margin-bottom:20px" data-i18n="auth.loginTitle">ุชุณุฌูู ุงูุฏุฎูู ุงูุขูู</h2>
        
        <div class="input-group">
            <i class="fa-solid fa-envelope"></i>
            <input type="email" data-placeholder="auth.emailPlaceholder">
        </div>
        
        <div class="input-group">
            <i class="fa-solid fa-lock"></i>
            <input type="password" data-placeholder="auth.passPlaceholder">
        </div>

        <button class="main-btn" onclick="login()">
            <span data-i18n="auth.enterBtn">ุฏุฎูู ุขูู</span> <i class="fa-solid fa-arrow-left flip-icon"></i>
        </button>

        <div style="margin-top:20px; cursor:pointer;" id="fingerprint-login-btn">
            <i class="fa-solid fa-fingerprint fingerprint-scan"></i>
            <p style="font-size:14px; color:var(--accent); font-weight:bold;" data-i18n="auth.piFingerprint">ุฃู ุงุณุชุฎุฏู ุจุตูุฉ Pi Network</p>
        </div>

        <div class="auth-footer">
            <p data-i18n="auth.noAccount">ููุณ ูุฏูู ุญุณุงุจุ <a href="#" style="color:var(--accent)">ุณุฌู ุงูุขู</a></p>
        </div>
    </div>
</div>

<!-- ========================================== -->
<!-- 2. ุงูุชุทุจูู ุงูุฑุฆูุณู -->
<!-- ========================================== -->
<div id="app-container" style="display:none;">
    <div class="fixed-header-wrapper">
        <div class="header" id="main-header">
            <div class="content-wrapper">
                <div class="logo"><span class="ai-badge">AI</span><i class="fa-solid fa-store"></i> Forsale</div>
                <div style="display:flex; gap:10px;">
                    <div class="icon-btn primary" onclick="openModal('ai-upload-modal')"><i class="fa-solid fa-plus"></i></div>
                    <div class="notification-icon-container">
                        <div class="notification-dot"></div>
                        <div class="icon-btn" onclick="openModal('notificationsModal')"><i class="fa-solid fa-bell"></i></div>
                    </div>
                    <div class="icon-btn" onclick="openModal('settingsModal')"><i class="fa-solid fa-gear"></i></div>
                </div>
            </div>
        </div>
    </div>

    <div class="container">
        <div class="content-wrapper">
            <div class="search-box">
                <i class="fa-solid fa-magnifying-glass search-icon"></i>
                <input type="text" data-placeholder="home.searchPlaceholder">
            </div>
            
            <div class="cats-scroll">
                <div class="cat-item active" data-i18n="cats.all">ุงููู</div>
                <div class="cat-item" data-i18n="cats.cars">ุณูุงุฑุงุช</div>
                <div class="cat-item" data-i18n="cats.phones">ููุงุชู</div>
                <div class="cat-item" data-i18n="cats.realestate">ุนูุงุฑุงุช</div>
                <div class="cat-item" data-i18n="cats.services">ุฎุฏูุงุช</div>
            </div>

            <h2 style="font-size: 18px; color: var(--text-main); margin: 0 0 15px;" data-i18n="home.aiSuggestions">ุงูุชุฑุงุญุงุช Logy AI</h2>
            
            <div class="products-grid">
                <!-- ููุชุฌ ุชุฌุฑูุจู 1 -->
                <div class="product-card" onclick="openModal('product-detail-modal')">
                    <div class="p-img-box">
                        <div class="ai-tag"><i class="fa-solid fa-robot"></i> AI Verified</div>
                        <img src="https://images.unsplash.com/photo-1511707171634-5f897ff02aa9?w=500&q=80" alt="Product">
                    </div>
                    <div class="p-details">
                        <div class="p-name">iPhone 15 Pro Max</div>
                        <div class="p-price">350 Pi</div>
                    </div>
                </div>
                 <!-- ููุชุฌ ุชุฌุฑูุจู 2 -->
                 <div class="product-card" onclick="openModal('product-detail-modal')">
                    <div class="p-img-box">
                        <div class="ai-tag"><i class="fa-solid fa-robot"></i> Best Price</div>
                        <img src="https://images.unsplash.com/photo-1494976388531-d1058494cdd8?w=500&q=80" alt="Car">
                    </div>
                    <div class="p-details">
                        <div class="p-name">Tesla Model 3</div>
                        <div class="p-price">12,000 Pi</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ูุงูุฐุฉ ุชูุงุตูู ุงูููุชุฌ -->
    <div id="product-detail-modal" class="modal">
        <div class="detail-header">
            <div class="logo"><span class="ai-badge">AI</span> <span data-i18n="product.title">ุงูุชูุงุตูู</span></div>
            <div class="icon-btn" onclick="closeModal('product-detail-modal')"><i class="fa-solid fa-xmark"></i></div>
        </div>
        <div class="content-wrapper">
            <img class="detail-img" src="https://images.unsplash.com/photo-1511707171634-5f897ff02aa9?w=500&q=80">
            <div class="detail-title">iPhone 15 Pro Max</div>
            <div class="detail-price">350 Pi</div>

            <h3 class="ai-section-title"><i class="fa-solid fa-microchip"></i> <span data-i18n="product.aiAnalysis">ุชุญููู AI ููุณุนุฑ</span></h3>
            <div class="glass-panel ai-price-card">
                <div class="stat-box">
                    <div class="value">9.8</div>
                    <div class="label" data-i18n="product.score">ููุทุฉ ุงูููุฉ</div>
                </div>
                <div class="stat-box">
                    <div class="value">Excellent</div>
                    <div class="label" data-i18n="product.condition">ุงูุญุงูุฉ</div>
                </div>
            </div>
            
            <div class="buy-fixed-bar">
                <div class="content-wrapper">
                    <button class="buy-btn" onclick="openModal('checkoutModal')">
                        <i class="fa-solid fa-cart-shopping"></i> <span data-i18n="product.buyBtn">ุดุฑุงุก ุงูุขู</span>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- ูุงูุฐุฉ ุงูุฅุนุฏุงุฏุงุช (ูููุง ุชุบููุฑ ุงููุบุฉ) -->
    <div id="settingsModal" class="modal">
        <div class="detail-header">
            <div class="logo"><span class="ai-badge">AI</span> <span data-i18n="settings.title">ุงูุฅุนุฏุงุฏุงุช</span></div>
            <div class="icon-btn" onclick="closeModal('settingsModal')"><i class="fa-solid fa-xmark"></i></div>
        </div>
        <div class="content-wrapper">
            <div class="settings-group">
                <h4 data-i18n="settings.general">ุนุงู</h4>
                <!-- ุฒุฑ ุชุบููุฑ ุงููุบุฉ ุฏุงุฎู ุงูุฅุนุฏุงุฏุงุช -->
                <button class="primary" onclick="toggleLangDropdownInSettings()">
                    <i class="fa-solid fa-globe"></i> <span data-i18n="settings.changeLang">ุชุบููุฑ ุงููุบุฉ</span>
                </button>
            </div>
            
            <button class="buy-btn" style="background:var(--danger); margin-top:30px;" onclick="location.reload()">
                <i class="fa-solid fa-right-from-bracket"></i> <span data-i18n="settings.logout">ุชุณุฌูู ุงูุฎุฑูุฌ</span>
            </button>
        </div>
    </div>
    
    <!-- ุจุงูู ุงูููุงูุฐ (Modals) ูุงุฑุบุฉ ูุบุฑุถ ุงูุนุฑุถ -->
    <div id="ai-upload-modal" class="modal"><div class="detail-header"><div class="logo">Upload</div><div class="icon-btn" onclick="closeModal('ai-upload-modal')">X</div></div></div>
    <div id="notificationsModal" class="modal"><div class="detail-header"><div class="logo">Notifications</div><div class="icon-btn" onclick="closeModal('notificationsModal')">X</div></div></div>
    <div id="checkoutModal" class="modal"><div class="detail-header"><div class="logo">Checkout</div><div class="icon-btn" onclick="closeModal('checkoutModal')">X</div></div></div>

    <!-- ุดุฑูุท ุงูุชููู ุงูุณููู -->
    <div class="footer-nav">
        <div class="nav-item active">
            <i class="fa-solid fa-house"></i>
            <span data-i18n="nav.home">ุงูุฑุฆูุณูุฉ</span>
        </div>
        <div class="nav-item">
            <i class="fa-solid fa-robot"></i>
            <span data-i18n="nav.ai">Logy AI</span>
        </div>
        <div class="nav-item">
            <i class="fa-solid fa-box"></i>
            <span data-i18n="nav.orders">ุงูุทูุจุงุช</span>
        </div>
        <div class="nav-item">
            <i class="fa-solid fa-wallet"></i>
            <span data-i18n="nav.wallet">ุงููุญูุธุฉ</span>
        </div>
    </div>
</div>

<!-- ========================================== -->
<!-- 3. ููุฏ ุงูุฌุงูุงุณูุฑูุจุช (ุงูููุทู + ุงููุบุงุช) -->
<!-- ========================================== -->
<script>
    // --- 1. ูุงููุณ ุงูุชุฑุฌูุงุช ---
    const TRANSLATIONS = {
        ar: {
            auth: { subtitle: "ููุตุฉ ุงููุณุชูุจู ุงูุฐููุฉ - ูุฏุนููุฉ ุจู Pi", loginTitle: "ุชุณุฌูู ุงูุฏุฎูู ุงูุขูู", emailPlaceholder: "ุงูุจุฑูุฏ ุงูุฅููุชุฑููู", passPlaceholder: "ูููุฉ ุงููุฑูุฑ", enterBtn: "ุฏุฎูู ุขูู", piFingerprint: "ุฃู ุงุณุชุฎุฏู ุจุตูุฉ Pi Network", noAccount: "ููุณ ูุฏูู ุญุณุงุจุ" },
            home: { searchPlaceholder: "ุงุจุญุซ ุจุฐูุงุก ุงุตุทูุงุนู ุฃู ุตู ููุชุฌู...", aiSuggestions: "ุงูุชุฑุงุญุงุช Logy AI" },
            nav: { home: "ุงูุฑุฆูุณูุฉ", ai: "Logy AI", orders: "ุงูุทูุจุงุช", wallet: "ุงููุญูุธุฉ" },
            cats: { all: "ุงููู", cars: "ุณูุงุฑุงุช", phones: "ููุงุชู", realestate: "ุนูุงุฑุงุช", services: "ุฎุฏูุงุช" },
            settings: { title: "ุงูุฅุนุฏุงุฏุงุช", general: "ุงูุญุณุงุจ ุงูุนุงู", changeLang: "ุชุบููุฑ ุงููุบุฉ", logout: "ุชุณุฌูู ุงูุฎุฑูุฌ" },
            product: { title: "ุชูุงุตูู ุงูููุชุฌ", aiAnalysis: "ุชุญููู AI ููุณุนุฑ", score: "ููุทุฉ ุงูููุฉ", condition: "ุงูุญุงูุฉ", buyBtn: "ุดุฑุงุก ุงูููุชุฌ ุงูุขู" }
        },
        en: {
            auth: { subtitle: "Future Smart Platform - Powered by Pi", loginTitle: "Secure Login", emailPlaceholder: "Email Address", passPlaceholder: "Password", enterBtn: "Secure Login", piFingerprint: "Login with Pi Fingerprint", noAccount: "No account?" },
            home: { searchPlaceholder: "Ask AI or search for products...", aiSuggestions: "Logy AI Suggestions" },
            nav: { home: "Home", ai: "Logy AI", orders: "Orders", wallet: "Wallet" },
            cats: { all: "All", cars: "Cars", phones: "Phones", realestate: "Real Estate", services: "Services" },
            settings: { title: "Settings", general: "General", changeLang: "Change Language", logout: "Logout" },
            product: { title: "Product Details", aiAnalysis: "AI Price Analysis", score: "Score", condition: "Condition", buyBtn: "Buy Now" }
        },
        es: {
             auth: { subtitle: "Plataforma Inteligente", loginTitle: "Acceso Seguro", emailPlaceholder: "Correo Electrรณnico", passPlaceholder: "Contraseรฑa", enterBtn: "Entrar", piFingerprint: "Usar Pi Fingerprint", noAccount: "ยฟSin cuenta?" },
             home: { searchPlaceholder: "Buscar productos...", aiSuggestions: "Sugerencias IA" },
             nav: { home: "Inicio", ai: "Logy AI", orders: "Pedidos", wallet: "Cartera" },
             cats: { all: "Todos", cars: "Coches", phones: "Mรณviles", realestate: "Inmobiliaria", services: "Servicios" },
             settings: { title: "Ajustes", general: "General", changeLang: "Cambiar Idioma", logout: "Cerrar Sesiรณn" },
             product: { title: "Detalles", aiAnalysis: "Anรกlisis IA", score: "Puntuaciรณn", condition: "Condiciรณn", buyBtn: "Comprar Ahora" }
        }
    };

    const LANGUAGES = [
        { code: 'ar', name: 'ุงูุนุฑุจูุฉ', flag: '๐ธ๐ฆ', dir: 'rtl' },
        { code: 'en', name: 'English', flag: '๐ฌ๐ง', dir: 'ltr' },
        { code: 'es', name: 'Espaรฑol', flag: '๐ช๐ธ', dir: 'ltr' }
    ];

    let currentLang = 'ar';

    // --- 2. ุฏูุงู ุงููุธุงู ูุงููุบุงุช ---
    function initApp() {
        renderLangDropdown();
        translatePage();
    }

    function renderLangDropdown() {
        const dropdown = document.getElementById('langDropdown');
        dropdown.innerHTML = LANGUAGES.map(lang => `
            <div class="lang-option ${lang.code === currentLang ? 'active' : ''}" onclick="changeLang('${lang.code}')">
                <span style="font-size:18px">${lang.flag}</span>
                <span>${lang.name}</span>
            </div>
        `).join('');
    }

    function toggleLangDropdown() {
        document.getElementById('langDropdown').classList.toggle('show');
    }

    function toggleLangDropdownInSettings() {
        // ูุบูู ุงูููุฏุงู ูุคูุชุงู ุฃู ูุธูุฑ ุงููุงุฆูุฉ ูููู
        document.getElementById('langDropdown').classList.add('show');
        document.getElementById('settingsModal').style.zIndex = "1000"; // Lower than dropdown
    }

    function changeLang(code) {
        currentLang = code;
        const langData = LANGUAGES.find(l => l.code === code);
        
        // ุชุบููุฑ ุงูุงุชุฌุงู ูุงููุบุฉ
        document.documentElement.lang = code;
        document.documentElement.dir = langData.dir;
        
        // ุชุญุฏูุซ ุงูุฒุฑ ุงูุนุงุฆู
        document.getElementById('currentFlag').textContent = langData.flag;
        document.getElementById('currentLangCode').textContent = code.toUpperCase();
        
        // ุชุญุฏูุซ ุงููุตูุต
        translatePage();
        
        // ุฅุฎูุงุก ุงููุงุฆูุฉ
        renderLangDropdown();
        document.getElementById('langDropdown').classList.remove('show');
        
        // ุนูุณ ุงูุฃููููุงุช (ุงูุฃุณูู)
        document.querySelectorAll('.flip-icon').forEach(icon => {
            icon.style.transform = langData.dir === 'rtl' ? 'rotate(0deg)' : 'rotate(180deg)';
        });
    }

    function translatePage() {
        const t = TRANSLATIONS[currentLang] || TRANSLATIONS.en;
        
        // ุชุฑุฌูุฉ ุงููุตูุต ุงูุฏุงุฎููุฉ
        document.querySelectorAll('[data-i18n]').forEach(el => {
            const keys = el.dataset.i18n.split('.');
            let value = t;
            keys.forEach(k => { value = value ? value[k] : null });
            if (value) el.innerHTML = value;
        });

        // ุชุฑุฌูุฉ ุงูู Placeholders
        document.querySelectorAll('[data-placeholder]').forEach(el => {
            const keys = el.dataset.placeholder.split('.');
            let value = t;
            keys.forEach(k => { value = value ? value[k] : null });
            if (value) el.placeholder = value;
        });
    }

    // --- 3. ุฏูุงู ุงูุชุทุจูู (Modals & Navigation) ---
    function login() {
        document.getElementById('auth-container').style.display = 'none';
        document.getElementById('lang-float-btn').style.display = 'none'; // ุฅุฎูุงุก ุฒุฑ ุงููุบุฉ ูู ุงูุฏุงุฎู
        document.getElementById('app-container').style.display = 'block';
        // ุฅุถุงูุฉ ุฃููููุดู ุจุณูุท
        document.getElementById('app-container').style.opacity = '0';
        setTimeout(() => document.getElementById('app-container').style.opacity = '1', 100);
    }

    function openModal(id) {
        document.getElementById(id).style.display = 'block';
    }

    function closeModal(id) {
        document.getElementById(id).style.display = 'none';
    }

    // ุฅุบูุงู ุงูููุงุฆู ุนูุฏ ุงูููุฑ ุฎุงุฑุฌูุง
    window.onclick = function(event) {
        if (!event.target.closest('#lang-float-btn') && !event.target.closest('.settings-group')) {
            document.getElementById('langDropdown').classList.remove('show');
        }
    }

    // ุชุดุบูู ุนูุฏ ุงูุจุฏุก
    initApp();

</script>
</body>
</html>
